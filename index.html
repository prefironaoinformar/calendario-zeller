<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <title>Calculadora de Dias - Zeller & Doomsday</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      background: #fce4ec; /* fundo pastel */
      font-family: "Comic Sans MS", "Comic Sans", cursive, sans-serif;
      color: #4a148c;
      text-align: center;
      margin: 20px;
    }
    header {
      background: #ff80ab;
      padding: 20px;
      border-radius: 10px;
    }
    nav a {
      text-decoration: none;
      margin: 10px;
      padding: 10px;
      background: #f8bbd0;
      color: #4a148c;
      border-radius: 5px;
      font-weight: bold;
    }
    .calculator {
      margin-top: 20px;
      padding: 10px;
      background: #fff3e0;
      border-radius: 10px;
      display: inline-block;
      text-align: left;
    }
    input {
      padding: 5px;
      margin: 5px;
      width: 80px;
      text-align: center;
    }
    button {
      padding: 8px 12px;
      cursor: pointer;
    }
    .examples {
      margin-top: 20px;
      text-align: left;
      display: inline-block;
    }
    .examples ul {
      list-style: none;
      padding: 0;
    }
    .gif-container {
      margin-top: 20px;
    }
    .gif-container img {
      width: 100px;
      margin: 5px;
    }
    footer {
      margin-top: 20px;
      font-size: 0.8em;
    }
    a, a:visited {
      color: #4a148c;
    }
  </style>
</head>
<body>
  <header>
    <h1>Calculadora de Dias - Zeller & Doomsday</h1>
    <p>Bem-vindo! Este site permite calcular o dia da semana utilizando a Congruência de Zeller (para os calendários Juliano e Gregoriano) e a Doomsday Rule (para o calendário Gregoriano).</p>
  </header>
  
  <nav>
    <a href="index.html">Calculadora</a>
    <a href="zeller.html">Congruência de Zeller</a>
    <a href="doomsday.html">Doomsday Rule</a>
  </nav>
  
  <div class="calculator">
    <h2>Calculadora</h2>
    <label>Dia:</label>
    <input type="number" id="dia" min="1" max="31" value="18">
    
    <label>Mês:</label>
    <input type="number" id="mes" min="1" max="12" value="2">
    
    <label>Ano:</label>
    <input type="number" id="ano" min="1" value="2025">
    
    <button onclick="calcularDiaSemana()">Calcular</button>
    
    <h3 id="resultado"></h3>
    <p id="explicacao"></p>
    <p><a id="linkTimeAndDate" href="#" target="_blank">Verificar no TimeAndDate</a></p>
  </div>
  
  <div class="examples">
    <h2>Exemplos Históricos</h2>
    <ul>
      <li><strong>29/05/1453</strong> (Queda de Constantinopla) – <a href="https://pt.wikipedia.org/wiki/Queda_de_Constantinopla" target="_blank">Wikipedia</a></li>
      <li><strong>12/10/1492</strong> (Descobrimento da América) – <a href="https://pt.wikipedia.org/wiki/Descobrimento_da_Am%C3%A9rica" target="_blank">Wikipedia</a></li>
      <li><strong>15/03/44 a.C.</strong> (Morte de Júlio César) – <a href="https://pt.wikipedia.org/wiki/J%C3%BAlio_C%C3%A9sar" target="_blank">Wikipedia</a></li>
      <li><strong>18/02/2025</strong> (Data Exemplo Recente)</li>
    </ul>
  </div>
  
  <div class="gif-container">
    <img src="https://i.gifer.com/4JU.gif" alt="GIF 1">
    <img src="https://i.gifer.com/4Sux.gif" alt="GIF 2">
    <img src="https://i.gifer.com/ZiFz.gif" alt="GIF 3">
    <img src="https://i.gifer.com/EkII.gif" alt="GIF 4">
  </div>
  
  <footer>
    <p>© 2025 prefironaoinformar. Hospedado no GitHub Pages.</p>
    <p><a href="https://github.com/prefironaoinformar/calendario-zeller" target="_blank">Código fonte no GitHub</a></p>
    <p>Contato: <a href="mailto:prefironaoinformar@gmail.com">prefironaoinformar@gmail.com</a></p>
    <p>Referência: <a href="https://www.fourmilab.ch/documents/calendar/" target="_blank">Fourmilab's Calendar</a></p>
  </footer>
  
  <script>
    function calcularDiaSemana() {
      let dia = parseInt(document.getElementById("dia").value);
      let mes = parseInt(document.getElementById("mes").value);
      let ano = parseInt(document.getElementById("ano").value);
      let calendario = "Juliano";
      let h;
  
      // Se a data for posterior à reforma (15/10/1582 ou depois), usamos o calendário gregoriano.
      if (ano > 1582 || (ano === 1582 && (mes > 10 || (mes === 10 && dia >= 15)))) {
          calendario = "Gregoriano";
          h = calcularZellerGregoriano(dia, mes, ano);
      } else if (ano === 1582 && mes === 10 && dia >= 5 && dia <= 14) {
          document.getElementById("explicacao").innerHTML = 
              "<strong>Período inexistente:</strong> Devido à reforma do calendário gregoriano, os dias de <strong>5 a 14 de outubro de 1582</strong> não existem oficialmente. Abaixo, os cálculos são apresentados para ambos os calendários de forma hipotética.";
          let hJuliano = calcularZellerJuliano(dia, mes, ano);
          let hGregoriano = calcularZellerGregoriano(dia, mes, ano);
          document.getElementById("resultado").innerHTML = 
              `Juliano: ${obterDiaSemana(hJuliano)}<br>` +
              `Gregoriano: ${obterDiaSemana(hGregoriano)}`;
          atualizarLinkTimeAndDate(dia, mes, ano);
          return;
      } else {
          h = calcularZellerJuliano(dia, mes, ano);
      }
  
      document.getElementById("resultado").innerHTML = 
          `A data <strong>${dia}/${mes}/${ano}</strong> está no <strong>calendário ${calendario}</strong> e caiu em <strong>${obterDiaSemana(h)}</strong>.<br>` +
          `<a href="#" onclick="alternarCalendario(${dia}, ${mes}, ${ano})">Visualizar no outro calendário</a>`;
  
      document.getElementById("explicacao").innerHTML = "";
      atualizarLinkTimeAndDate(dia, mes, ano);
    }
  
    function calcularZellerJuliano(dia, mes, ano) {
      if (mes < 3) {
          mes += 12;
          ano -= 1;
      }
      let q = dia, m = mes, K = ano % 100, J = Math.floor(ano / 100);
      let h = (q + Math.floor((13 * (m + 1)) / 5) + K + Math.floor(K / 4) + 5 - J) % 7;
      return (h + 7) % 7;
    }
  
    function calcularZellerGregoriano(dia, mes, ano) {
      if (mes < 3) {
          mes += 12;
          ano -= 1;
      }
      let q = dia, m = mes, K = ano % 100, J = Math.floor(ano / 100);
      let h = (q + Math.floor((13 * (m + 1)) / 5) + K + Math.floor(K / 4) + Math.floor(J / 4) + 5 * J) % 7;
      return (h + 7) % 7;
    }
  
    function obterDiaSemana(h) {
      let diasSemana = ["Sábado", "Domingo", "Segunda-feira", "Terça-feira", "Quarta-feira", "Quinta-feira", "Sexta-feira"];
      return diasSemana[h];
    }
  
    function alternarCalendario(dia, mes, ano) {
      let calendario = (ano > 1582 || (ano === 1582 && (mes > 10 || (mes === 10 && dia >= 15)))) ? "Gregoriano" : "Juliano";
      let novoAno = ano, novoMes = mes, novoDia = dia;
  
      if (calendario === "Gregoriano") {
          let diferenca = Math.floor((ano - 1500) / 100) - Math.floor((ano - 1500) / 400) + 10;
          novoDia -= diferenca;
          if (novoDia <= 0) {
              novoMes -= 1;
              if (novoMes < 1) {
                  novoMes = 12;
                  novoAno -= 1;
              }
              novoDia += 30; // Aproximado
          }
          calendario = "Juliano";
      } else {
          let diferenca = Math.floor((ano - 1500) / 100) - Math.floor((ano - 1500) / 400) + 10;
          novoDia += diferenca;
          if (novoDia > 31) {
              novoMes += 1;
              if (novoMes > 12) {
                  novoMes = 1;
                  novoAno += 1;
              }
              novoDia -= 31; // Aproximado
          }
          calendario = "Gregoriano";
      }
  
      let h = (calendario === "Juliano") ? calcularZellerJuliano(novoDia, novoMes, novoAno) : calcularZellerGregoriano(novoDia, novoMes, novoAno);
  
      document.getElementById("resultado").innerHTML = 
          `A data equivalente no <strong>calendário ${calendario}</strong> é <strong>${novoDia}/${novoMes}/${novoAno}</strong> e caiu em <strong>${obterDiaSemana(h)}</strong>.`;
      
      atualizarLinkTimeAndDate(novoDia, novoMes, novoAno);
    }
  
    function atualizarLinkTimeAndDate(dia, mes, ano) {
      let url = `https://www.timeanddate.com/calendar/?year=${ano}&month=${mes}&day=${dia}`;
      document.getElementById("linkTimeAndDate").href = url;
    }
  </script>
</body>
</html>
